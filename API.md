# NeuraLearn API Documentation

## Base URL
```
http://localhost:5000/api
```

## Authentication

All protected endpoints require a JWT token in the Authorization header:
```
Authorization: Bearer <your-jwt-token>
```

## Endpoints

### Authentication

#### POST /auth/signup
Register a new user.

**Request Body:**
```json
{
  "email": "user@example.com",
  "password": "password123",
  "firstName": "John",
  "lastName": "Doe",
  "role": "student"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "uuid",
      "email": "user@example.com",
      "firstName": "John",
      "lastName": "Doe",
      "role": "student"
    },
    "token": "jwt-token",
    "refreshToken": "refresh-token"
  }
}
```

#### POST /auth/login
Authenticate user and get tokens.

**Request Body:**
```json
{
  "email": "user@example.com",
  "password": "password123",
  "role": "student"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "user": { ... },
    "token": "jwt-token",
    "refreshToken": "refresh-token"
  }
}
```

#### POST /auth/refresh
Refresh access token.

**Request Body:**
```json
{
  "refreshToken": "refresh-token"
}
```

#### GET /auth/verify
Verify current token.

**Headers:** `Authorization: Bearer <token>`

### Courses

#### GET /courses
Get paginated list of courses.

**Query Parameters:**
- `page` (int): Page number (default: 1)
- `limit` (int): Items per page (default: 10)
- `category` (string): Filter by category
- `difficulty` (string): Filter by difficulty

**Response:**
```json
{
  "success": true,
  "data": {
    "items": [
      {
        "id": "uuid",
        "title": "Introduction to Machine Learning",
        "description": "Learn ML fundamentals",
        "instructor": { ... },
        "difficulty": "beginner",
        "category": "Machine Learning",
        "duration": 1200,
        "enrolledStudents": 150,
        "rating": 4.5
      }
    ],
    "total": 50,
    "page": 1,
    "limit": 10,
    "totalPages": 5
  }
}
```

#### GET /courses/{id}
Get course details by ID.

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "title": "Introduction to Machine Learning",
    "description": "Learn ML fundamentals",
    "instructor": { ... },
    "lessons": [
      {
        "id": "uuid",
        "title": "Introduction to ML",
        "description": "Overview of ML concepts",
        "duration": 45,
        "order": 1
      }
    ]
  }
}
```

#### POST /courses/{id}/enroll
Enroll in a course.

**Headers:** `Authorization: Bearer <token>`

**Response:**
```json
{
  "message": "Enrolled successfully"
}
```

#### GET /courses/{id}/progress
Get user progress for a course.

**Headers:** `Authorization: Bearer <token>`

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "userId": "uuid",
    "courseId": "uuid",
    "completedLessons": 13,
    "totalLessons": 20,
    "completedQuizzes": 2,
    "totalQuizzes": 3,
    "averageScore": 87.5
  }
}
```

### Dashboard

#### GET /dashboard/metrics
Get user dashboard metrics.

**Headers:** `Authorization: Bearer <token>`

**Response:**
```json
{
  "success": true,
  "data": {
    "enrolledCourses": 3,
    "lessonsCompleted": 38,
    "quizzesTaken": 12,
    "averageScore": 87
  }
}
```

#### GET /dashboard/courses
Get user's enrolled courses.

**Headers:** `Authorization: Bearer <token>`

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "title": "Introduction to Machine Learning",
      "instructor": "Dr. Sarah Chen",
      "completedLessons": 13,
      "totalLessons": 20,
      "nextLesson": "Neural Networks Basics",
      "color": "bg-primary-100"
    }
  ]
}
```

#### GET /dashboard/quizzes
Get upcoming quizzes.

**Headers:** `Authorization: Bearer <token>`

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "title": "Supervised Learning",
      "course": "Introduction to Machine Learning",
      "scheduledAt": "2025-10-24T14:00:00Z"
    }
  ]
}
```

### Quiz Generation

#### POST /quiz/generate
Generate AI-powered quiz.

**Headers:** `Authorization: Bearer <token>`

**Request Body:**
```json
{
  "courseId": "uuid",
  "lessonIds": ["uuid1", "uuid2"],
  "difficulty": "medium",
  "questionType": "mixed",
  "numberOfQuestions": 5
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "title": "AI Generated Quiz - Course Name",
    "description": "Practice quiz generated by AI",
    "questions": [
      {
        "id": "uuid",
        "text": "What is machine learning?",
        "type": "multiple_choice",
        "options": ["Option A", "Option B", "Option C", "Option D"],
        "correctAnswer": "Option A",
        "difficulty": "medium",
        "points": 1
      }
    ]
  }
}
```

#### GET /quiz/{id}
Get quiz details.

**Headers:** `Authorization: Bearer <token>`

#### POST /quiz/{id}/submit
Submit quiz attempt.

**Headers:** `Authorization: Bearer <token>`

**Request Body:**
```json
{
  "answers": [
    {
      "questionId": "uuid",
      "answer": "Option A"
    }
  ]
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "score": 85,
    "totalPoints": 100,
    "completedAt": "2025-01-01T12:00:00Z"
  }
}
```

### User Management

#### GET /user/profile
Get user profile.

**Headers:** `Authorization: Bearer <token>`

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "email": "user@example.com",
    "firstName": "John",
    "lastName": "Doe",
    "role": "student",
    "avatar": "url",
    "createdAt": "2025-01-01T00:00:00Z"
  }
}
```

#### PUT /user/profile
Update user profile.

**Headers:** `Authorization: Bearer <token>`

**Request Body:**
```json
{
  "firstName": "Updated",
  "lastName": "Name"
}
```

#### POST /user/avatar
Upload user avatar.

**Headers:** `Authorization: Bearer <token>`

**Request:** Multipart form data with `avatar` file

**Response:**
```json
{
  "success": true,
  "data": {
    "url": "https://example.com/avatar.jpg"
  }
}
```

## Error Responses

All endpoints return consistent error responses:

```json
{
  "message": "Error description"
}
```

**Common HTTP Status Codes:**
- `200` - Success
- `201` - Created
- `400` - Bad Request
- `401` - Unauthorized
- `403` - Forbidden
- `404` - Not Found
- `500` - Internal Server Error

## Rate Limiting

API endpoints are rate-limited to prevent abuse:
- 100 requests per hour per IP
- 1000 requests per hour per authenticated user

## Pagination

Paginated endpoints return:
```json
{
  "items": [...],
  "total": 100,
  "page": 1,
  "limit": 10,
  "totalPages": 10
}
```

## Filtering and Sorting

Many endpoints support query parameters for filtering and sorting:

- `sort` - Sort field (e.g., `created_at`, `title`)
- `order` - Sort order (`asc`, `desc`)
- `search` - Search term
- `category` - Filter by category
- `difficulty` - Filter by difficulty level
